<div class="card" data-sort-by="{{ sort_by }}" data-sort-order="{{ sort_order }}">
        <div class="table-responsive">
            <table class="table table-vcenter card-table table-hover">
                <thead>
                    <tr>
                        <th style="width: 50px;">#</th>
                        <th style="cursor: pointer;"
                            hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by=schema&sort_order={% if sort_by == "schema" %}{% if sort_order == "asc" %}desc{% else %}asc{% endif %}{% else %}asc{% endif %}"
                            hx-target="#tables-table"
                            hx-swap="innerHTML">
                            Schema
                            {% if sort_by == "schema" %}
                                {% if sort_order == "asc" %}
                                    <i class="ti ti-chevron-up"></i>
                                {% else %}
                                    <i class="ti ti-chevron-down"></i>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th style="cursor: pointer;"
                            hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by=name&sort_order={% if sort_by == "name" %}{% if sort_order == "asc" %}desc{% else %}asc{% endif %}{% else %}asc{% endif %}"
                            hx-target="#tables-table"
                            hx-swap="innerHTML">
                            Table
                            {% if sort_by == "name" %}
                                {% if sort_order == "asc" %}
                                    <i class="ti ti-chevron-up"></i>
                                {% else %}
                                    <i class="ti ti-chevron-down"></i>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th class="text-end" style="cursor: pointer;"
                            hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by=rows&sort_order={% if sort_by == "rows" %}{% if sort_order == "asc" %}desc{% else %}asc{% endif %}{% else %}asc{% endif %}"
                            hx-target="#tables-table"
                            hx-swap="innerHTML">
                            Rows
                            {% if sort_by == "rows" %}
                                {% if sort_order == "asc" %}
                                    <i class="ti ti-chevron-up"></i>
                                {% else %}
                                    <i class="ti ti-chevron-down"></i>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th class="text-end" style="cursor: pointer;"
                            hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by=size&sort_order={% if sort_by == "size" %}{% if sort_order == "asc" %}desc{% else %}asc{% endif %}{% else %}desc{% endif %}"
                            hx-target="#tables-table"
                            hx-swap="innerHTML">
                            Size
                            {% if sort_by == "size" %}
                                {% if sort_order == "asc" %}
                                    <i class="ti ti-chevron-up"></i>
                                {% else %}
                                    <i class="ti ti-chevron-down"></i>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th style="cursor: pointer;"
                            hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by=indexes&sort_order={% if sort_by == "indexes" %}{% if sort_order == "asc" %}desc{% else %}asc{% endif %}{% else %}asc{% endif %}"
                            hx-target="#tables-table"
                            hx-swap="innerHTML">
                            Indexes
                            {% if sort_by == "indexes" %}
                                {% if sort_order == "asc" %}
                                    <i class="ti ti-chevron-up"></i>
                                {% else %}
                                    <i class="ti ti-chevron-down"></i>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th class="w-1">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% if tables.len() == 0 %}
                    <tr>
                        <td colspan="7" class="text-center text-muted py-4">
                            No tables match your filter
                        </td>
                    </tr>
                {% else %}
                    {% for t in tables %}
                    <tr>
                        <td class="text-muted">{{ t.num }}</td>
                        <td><a href="{% if base_path == "/" %}/tables/{{ t.schema }}/*{% else %}{{ base_path }}/tables/{{ t.schema }}/*{% endif %}">{{ t.schema }}</a></td>
                        <td>
                            <div>
                                <a href="{% if base_path == "/" %}/tables/{{ t.schema }}/{{ t.name }}/detail{% else %}{{ base_path }}/tables/{{ t.schema }}/{{ t.name }}/detail{% endif %}">
                                    {{ t.name }}
                                </a>
                            </div>
                            {% if t.partitions.len() > 0 %}
                            <div class="text-muted small mt-1">
                                <i class="ti ti-layout-distribute-vertical"></i>
                                {{ t.partitions.len() }} partitions: {{ t.partitions|join(", ") }}
                            </div>
                            {% endif %}
                        </td>
                        <td class="text-end text-nowrap">{{ t.rows }}</td>
                        <td class="text-end text-nowrap">{{ t.size }}</td>
                        <td>{{ t.index_count }}</td>
                        <td>
                            <div class="btn-list">
                                <button class="btn btn-sm btn-icon btn-ghost-primary"
                                        data-schema="{{ t.schema }}"
                                        data-name="{{ t.name }}"
                                        onclick="openTableDetail(this)"
                                        title="Quick detail">
                                    <i class="ti ti-info-circle"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                {% endif %}
                </tbody>
            </table>
        </div>
        {% if filtered_count > 0 %}
        <div class="card-footer d-flex align-items-center">
            <p class="m-0 text-muted">
                Showing {{ showing_start }} - {{ showing_end }} of {{ filtered_count }}
                {% if filtered_count != total_count %}
                    ({{ total_count }} total)
                {% endif %}
            </p>
            {% if total_pages > 1 %}
            <ul class="pagination m-0 ms-auto">
                <!-- Previous -->
                {% if page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page={{ page - 1 }}&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        <i class="ti ti-chevron-left"></i> Prev
                    </a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <span class="page-link"><i class="ti ti-chevron-left"></i> Prev</span>
                </li>
                {% endif %}

                <!-- Page numbers -->
                {% if page > 2 %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page=1&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        1
                    </a>
                </li>
                {% if page > 3 %}
                <li class="page-item disabled"><span class="page-link">…</span></li>
                {% endif %}
                {% endif %}

                {% if page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page={{ page - 1 }}&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        {{ page - 1 }}
                    </a>
                </li>
                {% endif %}

                <li class="page-item active">
                    <span class="page-link">{{ page }}</span>
                </li>

                {% if page < total_pages %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page={{ page + 1 }}&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        {{ page + 1 }}
                    </a>
                </li>
                {% endif %}

                {% if page < total_pages - 1 %}
                {% if page < total_pages - 2 %}
                <li class="page-item disabled"><span class="page-link">…</span></li>
                {% endif %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page={{ total_pages }}&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        {{ total_pages }}
                    </a>
                </li>
                {% endif %}

                <!-- Next -->
                {% if page < total_pages %}
                <li class="page-item">
                    <a class="page-link" href="#"
                       hx-get="{% if base_path == "/" %}/tables/{{ schema }}/{{ filter }}/table{% else %}{{ base_path }}/tables/{{ schema }}/{{ filter }}/table{% endif %}?page={{ page + 1 }}&per_page={{ per_page }}&sort_by={{ sort_by }}&sort_order={{ sort_order }}"
                       hx-target="#tables-table"
                       hx-swap="innerHTML">
                        Next <i class="ti ti-chevron-right"></i>
                    </a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <span class="page-link">Next <i class="ti ti-chevron-right"></i></span>
                </li>
                {% endif %}
            </ul>
            {% endif %}
        </div>
        {% endif %}
    </div>
